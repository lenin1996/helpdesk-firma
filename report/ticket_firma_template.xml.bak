<?xml version="1.0" encoding="UTF-8"?>
<odoo>
    <template id="ticket_firma_template">
        <t t-call="web.html_container">
            <t t-call="web.external_layout">

                <t t-foreach="docs" t-as="o">
                    <div class="page">

                        <!-- HEADER -->
                        <h2>
                            Ticket:
                            <span t-esc="o.name or 'Sin asunto'"/>
                        </h2>

                        <p>
                            <strong>ID:</strong>
                            <span t-esc="o.id"/>
                        </p>

                        <hr/>

                        <!-- DESCRIPCIÓN -->
                        <h3>Descripción</h3>
                        <div t-if="o.description">
                            <t t-raw="o.description"/>
                        </div>
                        <div t-else="">
                            <em>Sin descripción</em>
                        </div>

                        <!-- FIRMA -->
                        <t t-if="o.firma">
                            <hr/>
                            <h3>Firma</h3>

                            <p>
                                <strong>Firmado por:</strong>
                                <span t-esc="o.firma_signed_by or ''"/>
                            </p>

                            <p>
                                <strong>Fecha:</strong>
                                <span t-esc="o.firma_signed_on"/>
                            </p>

                            <br/>

                            <img
                                t-att-src="'data:image/png;base64,%s' % o.firma"
                                style="max-width:300px; border:1px solid #000;"
                            />
                        </t>

                    </div>
                </t>

            </t>
        </t>
    </template>
</odoo>
